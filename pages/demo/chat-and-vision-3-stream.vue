<script setup lang="ts">
import { useLangServeStreamResultFetch } from '~/utils/common';


const body = {
        "messages": [
            {
                "content": [
                    {
                        "type": "text",
                        "text": "这是什么图片？"
                    }, {
                        "type": "image_url",
                        "image_url": {
                            "url": "data:image/jpeg;base64,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"
                        }
                    }
                ],
                "type":"human"
            }
        ]
    }

const result = ref('')
function onclick() {
  useLangServeStreamResultFetch<unknown, string>(
    '/api/langserve/chat-and-vision-3-stream', 
    body,
    {
      onData: data => result.value += data
    },
  )
}
</script>

<template>
  <div>
    <button @click="onclick">click</button>
    {{ result }}
  </div>
</template>
